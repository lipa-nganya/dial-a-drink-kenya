[dotenv@17.2.3] injecting env (11) from .env -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
Starting server initialization...
Executing (default): SELECT 1+1 AS result
Database connection established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'categories'
ðŸš€ Server is running on port 5001
ðŸ”— Health check: http://localhost:5001/api/health
ðŸ“Š API endpoints:
   - GET  /api/health
   - GET  /api/categories
   - GET  /api/drinks
   - POST /api/orders
   - GET  /api/admin/orders
ðŸŒ Server ready to accept requests!
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'categories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'subcategories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'subcategories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drinks'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drinks' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drivers'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_drivers_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drivers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'orders'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentStatus' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentMethod' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'orders' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_items'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_items' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'countdowns'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'countdowns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'settings'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'settings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admins'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_admins_role' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admins' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'driver_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'driver_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'transactions'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_transactionType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentMethod' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentStatus' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'transactions' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_notifications'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_notifications' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'otps'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'otps' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'email_confirmations'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'email_confirmations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'customers'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'customers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admin_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admin_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'saved_addresses'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'saved_addresses' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database synchronized successfully.
Checking for missing columns...
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "isOnOffer" BOOLEAN DEFAULT false;
âœ… isOnOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "originalPrice" DECIMAL(10,2);
âœ… originalPrice column checked/added
Executing (default): UPDATE "drinks" 
      SET "originalPrice" = "price" 
      WHERE "originalPrice" IS NULL;
âœ… originalPrice set for existing drinks
Executing (default): ALTER TABLE "drinks" 
      ALTER COLUMN "image" TYPE TEXT;
âœ… Image column updated to TEXT type
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacity" JSON;
âœ… Capacity column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacityPricing" JSON;
âœ… Capacity pricing column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "abv" DECIMAL(5,2);
âœ… ABV column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "subcategories" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL UNIQUE,
        "categoryId" INTEGER NOT NULL REFERENCES "categories"("id"),
        "isActive" BOOLEAN DEFAULT true,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… subcategories table checked/created
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "subCategoryId" INTEGER REFERENCES "subcategories"("id");
âœ… subCategoryId column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "settings" (
        "id" SERIAL PRIMARY KEY,
        "key" VARCHAR(255) NOT NULL UNIQUE,
        "value" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… settings table checked/created
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentType';
âœ… paymentType column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverId';
âœ… driverId column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='drivers' AND column_name='pinHash';
âœ… pinHash column already exists in drivers table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverAccepted';
âœ… driverAccepted column already exists in orders table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentMethod';
âœ… paymentMethod column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentStatus';
âœ… paymentStatus column already exists
Executing (default): ALTER TYPE "enum_orders_status" ADD VALUE IF NOT EXISTS 'completed';
âœ… Status enum updated to include completed
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='tipAmount';
âœ… tipAmount column already exists in orders table
Executing (default): CREATE TABLE IF NOT EXISTS "transactions" (
        "id" SERIAL PRIMARY KEY,
        "orderId" INTEGER REFERENCES "orders"("id") ON DELETE CASCADE,
        "driverId" INTEGER REFERENCES "drivers"("id") ON DELETE SET NULL,
        "driverWalletId" INTEGER,
        "transactionType" VARCHAR(255) DEFAULT 'payment',
        "paymentMethod" VARCHAR(255) NOT NULL,
        "paymentProvider" VARCHAR(255),
        "amount" DECIMAL(10, 2) NOT NULL,
        "status" VARCHAR(255) DEFAULT 'pending',
        "paymentStatus" VARCHAR(255) DEFAULT 'pending',
        "receiptNumber" VARCHAR(255),
        "checkoutRequestID" VARCHAR(255),
        "merchantRequestID" VARCHAR(255),
        "phoneNumber" VARCHAR(255),
        "transactionDate" TIMESTAMP WITH TIME ZONE,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… transactions table checked/created
Executing (default): SELECT column_name 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='paymentStatus';
âœ… paymentStatus column already exists in transactions table
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='orderId';
âœ… orderId column already allows NULL in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverId';
âœ… driverId column already exists in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverWalletId';
âœ… driverWalletId column already exists in transactions table
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_type_enum AS ENUM ('payment', 'refund', 'tip', 'withdrawal');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'tip'
âœ… Added tip to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'withdrawal'
âœ… Added withdrawal to transaction_type_enum
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_status_enum AS ENUM ('pending', 'completed', 'failed', 'cancelled');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_payment_method_enum AS ENUM ('card', 'mobile_money', 'cash');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): SELECT data_type 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='transactionType';
Executing (default): ALTER TABLE "transactions" 
          ALTER COLUMN "transactionType" TYPE transaction_type_enum USING "transactionType"::transaction_type_enum;
Executing (default): CREATE TABLE IF NOT EXISTS "order_notifications" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "isActive" BOOLEAN DEFAULT true,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… order_notifications table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "otps" (
        "id" SERIAL PRIMARY KEY,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "otpCode" VARCHAR(10) NOT NULL,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "attempts" INTEGER DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… otps table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "email_confirmations" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) NOT NULL,
        "token" VARCHAR(255) NOT NULL UNIQUE,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… email_confirmations table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "customers" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) UNIQUE,
        "phone" VARCHAR(255) UNIQUE,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "customerName" VARCHAR(255),
        "hasSetPassword" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… customers table checked/created
Executing (default): DO $$ BEGIN
        CREATE TYPE driver_status_enum AS ENUM ('active', 'inactive', 'on_delivery', 'offline');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): CREATE TABLE IF NOT EXISTS "drivers" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL UNIQUE,
        "status" driver_status_enum DEFAULT 'offline',
        "lastActivity" TIMESTAMP WITH TIME ZONE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… drivers table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "driver_wallets" (
        "id" SERIAL PRIMARY KEY,
        "driverId" INTEGER NOT NULL UNIQUE REFERENCES "drivers"("id") ON DELETE CASCADE,
        "balance" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsReceived" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsCount" INTEGER NOT NULL DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… driver_wallets table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "saved_addresses" (
        "id" SERIAL PRIMARY KEY,
        "address" TEXT NOT NULL UNIQUE,
        "placeId" VARCHAR(255),
        "formattedAddress" TEXT,
        "searchCount" INTEGER DEFAULT 0,
        "apiCallsSaved" INTEGER DEFAULT 0,
        "costSaved" DECIMAL(10, 4) DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… saved_addresses table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "admins" (
        "id" SERIAL PRIMARY KEY,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "email" VARCHAR(255) NOT NULL UNIQUE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
âœ… admins table checked/created
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='admins' AND column_name='password';
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='role';
âœ… role column already exists in admins table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='inviteToken';
âœ… inviteToken columns already exist in admins table
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."username" = 'admin';
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."role" IS NULL;
Database columns updated successfully.
Executing (default): SELECT count(*) AS "count" FROM "categories" AS "Category";
Database setup completed.
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client connected: sObob0sJCirMr2MJAAAB
Client connected: jhf3HVpUtBnxMMc0AAAE
Client connected: yRq__VH0pAl72NZ8AAAF
Client yRq__VH0pAl72NZ8AAAF joined room: order-84
Client yRq__VH0pAl72NZ8AAAF joined room: order-83
Client connected: 2t42PnpvzBu0O7FzAAAH
Client connected: zlAmixsoYZPM9R90AAAJ
Client connected: Ayq9fKo0mnwfjDAPAAAL
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client disconnected: yRq__VH0pAl72NZ8AAAF
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."customerEmail" = 'mmumoki@gmail.com' AND "Order"."customerPhone" LIKE '%0727893741%' ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."customerEmail" = 'mmumoki@gmail.com' AND "Order"."customerPhone" LIKE '%0727893741%' ORDER BY "Order"."createdAt" DESC;
Client disconnected: zlAmixsoYZPM9R90AAAJ
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Client connected: Vr1Y1dfxn_LNoWBuAAAO
Client Vr1Y1dfxn_LNoWBuAAAO joined admin room
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client disconnected: jhf3HVpUtBnxMMc0AAAE
Client disconnected: 2t42PnpvzBu0O7FzAAAH
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Client connected: _8mF3LFgpGLy6rARAAAS
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Client connected: zH2gmkX7KRJzNDDjAAAT
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Client zH2gmkX7KRJzNDDjAAAT joined admin room
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Client _8mF3LFgpGLy6rARAAAS joined admin room
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."driverId" = 1 ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."driverId" = 1 ORDER BY "Order"."createdAt" DESC;
Client connected: CBbCHMhhPDVIh3HPAAAV
Client CBbCHMhhPDVIh3HPAAAV joined driver room: driver-1
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT "id", "name", "description", "image", "isActive", "createdAt", "updatedAt" FROM "categories" AS "Category" ORDER BY "Category"."name" ASC;
Executing (default): SELECT "Drink"."id", "Drink"."name", "Drink"."description", "Drink"."price", "Drink"."image", "Drink"."categoryId", "Drink"."subCategoryId", "Drink"."isAvailable", "Drink"."isPopular", "Drink"."isOnOffer", "Drink"."originalPrice", "Drink"."capacity", "Drink"."capacityPricing", "Drink"."abv", "Drink"."createdAt", "Drink"."updatedAt", "category"."id" AS "category.id", "category"."name" AS "category.name", "category"."description" AS "category.description", "category"."image" AS "category.image", "category"."isActive" AS "category.isActive", "category"."createdAt" AS "category.createdAt", "category"."updatedAt" AS "category.updatedAt", "subCategory"."id" AS "subCategory.id", "subCategory"."name" AS "subCategory.name", "subCategory"."categoryId" AS "subCategory.categoryId", "subCategory"."isActive" AS "subCategory.isActive", "subCategory"."createdAt" AS "subCategory.createdAt", "subCategory"."updatedAt" AS "subCategory.updatedAt" FROM "drinks" AS "Drink" LEFT OUTER JOIN "categories" AS "category" ON "Drink"."categoryId" = "category"."id" LEFT OUTER JOIN "subcategories" AS "subCategory" ON "Drink"."subCategoryId" = "subCategory"."id" ORDER BY "Drink"."name" ASC;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 12;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 10;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 8;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 11;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 15;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 16;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 14;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 17;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 1;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 13;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 9;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 6;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 5;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 7;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 12 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 10 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 8 ORDER BY "Drink"."id" ASC LIMIT 1;
Returning drinks with capacity pricing: [
  {
    id: 277,
    name: '1659 Sauvignon Blanc',
    capacityPricing: [ [Object] ]
  },
  { id: 281, name: '1659 Sweet Rose', capacityPricing: [ [Object] ] },
  {
    id: 1699,
    name: '1792 Small Batch Whisky',
    capacityPricing: [ [Object] ]
  },
  {
    id: 841,
    name: '1857 Grape juice red',
    capacityPricing: [ [Object] ]
  },
  {
    id: 842,
    name: '1857 Grape juice white',
    capacityPricing: [ [Object] ]
  },
  { id: 304, name: '4th Street Red', capacityPricing: [ [Object] ] },
  {
    id: 292,
    name: '4th Street White 5L',
    capacityPricing: [ [Object] ]
  },
  { id: 998, name: '58 Classic Gin', capacityPricing: [ [Object] ] },
  {
    id: 997,
    name: '58 Gin & Tonic Spiced Orange 330ml',
    capacityPricing: [ [Object] ]
  },
  { id: 1236, name: '8PM Fire Liqueur', capacityPricing: [] },
  { id: 1188, name: '8PM Honey', capacityPricing: [] },
  { id: 222, name: '8PM Indian Whisky', capacityPricing: [ [Object] ] },
  {
    id: 1526,
    name: 'Aberfeldy 12 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1564,
    name: 'Aberfeldy 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1706,
    name: 'Aberfeldy 21 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1737,
    name: 'Aberlour 10 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1625,
    name: 'Aberlour 12 Years',
    capacityPricing: [ [Object] ]
  },
  { id: 1543, name: 'Aberlour 18 Years', capacityPricing: null },
  {
    id: 1288,
    name: 'Absolut Citron',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 1386, name: 'Absolut Elyx', capacityPricing: [ [Object] ] },
  { id: 1292, name: 'Absolut Kurant', capacityPricing: [ [Object] ] },
  {
    id: 1290,
    name: 'Absolut Raspberri',
    capacityPricing: [ [Object] ]
  },
  { id: 1289, name: 'Absolut Vanilla', capacityPricing: [ [Object] ] },
  {
    id: 1006,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 25,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 365, name: 'Absolut Watkins', capacityPricing: [ [Object] ] },
  { id: 1390, name: 'Absolute Apeach', capacityPricing: [ [Object] ] },
  { id: 1384, name: 'Absolute Oak', capacityPricing: [ [Object] ] },
  { id: 1407, name: 'Absolute Pears', capacityPricing: [ [Object] ] },
  { id: 1391, name: 'Absolute Pepper', capacityPricing: [ [Object] ] },
  { id: 1392, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1007, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1394, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  { id: 1008, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  {
    id: 385,
    name: 'Ace Of Spades Champagne',
    capacityPricing: [ [Object] ]
  },
  {
    id: 941,
    name: 'Afri Bull Cafe Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1241,
    name: 'African Secret Marula Cream Liqueur',
    capacityPricing: []
  },
  { id: 700, name: 'Agavita Anejo', capacityPricing: [ [Object] ] },
  { id: 675, name: 'Agavita Blanco', capacityPricing: [ [Object] ] },
  { id: 1726, name: 'Akashi Red Whisky', capacityPricing: null },
  { id: 1723, name: 'Akashi White Oak', capacityPricing: [ [Object] ] },
  { id: 467, name: 'Akso Aloe Grapes', capacityPricing: [ [Object] ] },
  {
    id: 130,
    name: 'Akso Aloe Grapes',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 468, name: 'Akso Apple Ice', capacityPricing: [ [Object] ] },
  { id: 127, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 461, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 455, name: 'Akso Grape Ice', capacityPricing: [ [Object] ] },
  { id: 125, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 458, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 128, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  { id: 462, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  {
    id: 120,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 446,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 466,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  {
    id: 129,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  { id: 50, name: 'Al Capone Cigar', capacityPricing: [ [Object] ] },
  { id: 1802, name: 'Alamos Malbec', capacityPricing: null },
  {
    id: 224,
    name: 'All Seasons Whiskey',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 294,
    name: 'Alma Mora Pinot Grigio',
    capacityPricing: [ [Object] ]
  },
  { id: 1811, name: 'Alma Mora Shiraz', capacityPricing: [ [Object] ] },
  { id: 1814, name: 'Altar wine', capacityPricing: [ [Object] ] },
  { id: 1189, name: 'Amarula Cream Liqueur', capacityPricing: [] },
  { id: 1217, name: 'Amarula Gold', capacityPricing: [] },
  {
    id: 1242,
    name: 'Amarula Raspberry Chocolate',
    capacityPricing: []
  },
  {
    id: 1230,
    name: 'Amarula Vanilla Spice Cream',
    capacityPricing: []
  },
  {
    id: 1582,
    name: 'American Honey Whiskey Liqueur',
    capacityPricing: null
  },
  { id: 367, name: 'Amsterdam Vodka', capacityPricing: [ [Object] ] },
  {
    id: 903,
    name: 'Angostura 3 Years Old Reserve',
    capacityPricing: [ [Object] ]
  },
  {
    id: 902,
    name: 'Angostura 5 Years Old Superior Gold',
    capacityPricing: [ [Object] ]
  },
  {
    id: 904,
    name: 'Angostura Bitters',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 1209, name: 'Angostura Bitters', capacityPricing: [] },
  {
    id: 900,
    name: 'Angostura Caribbean Rum 1824',
    capacityPricing: [ [Object] ]
  },
  {
    id: 901,
    name: 'Angostura Caribbean Rum 1919',
    capacityPricing: [ [Object] ]
  },
  { id: 1225, name: 'Anthon Berg Chocolate', capacityPricing: [] },
  {
    id: 807,
    name: 'Aquamist sparkling water',
    capacityPricing: [ [Object] ]
  },
  {
    id: 372,
    name: 'Arthur Metz CrÃ©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1757,
    name: 'Arthur Metz CrÃ©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 375,
    name: "Arthur Metz CrÃ©mant d'Alsace",
    capacityPricing: [ [Object] ]
  },
  {
    id: 1761,
    name: "Arthur Metz CrÃ©mant d'Alsace",
    capacityPricing: null
  },
  { id: 1824, name: 'Asconi Pastoral', capacityPricing: [ [Object] ] },
  {
    id: 287,
    name: 'Asconi Red Semi Sweet',
    capacityPricing: [ [Object] ]
  },
  {
    id: 541,
    name: 'Atlas Ultra Strong 14',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1714,
    name: 'Auchentoshan 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1592,
    name: 'Auchentoshan American Oak',
    capacityPricing: [ [Object] ]
  },
  { id: 662, name: 'Azul Gold Tequila', capacityPricing: [ [Object] ] },
  {
    id: 690,
    name: 'Azul Reposado Tequila',
    capacityPricing: [ [Object] ]
  },
  { id: 930, name: 'Bacardi 8 Years', capacityPricing: [ [Object] ] },
  {
    id: 931,
    name: 'Bacardi Anejo Cuatro',
    capacityPricing: [ [Object] ]
  },
  {
    id: 926,
    name: 'Bacardi Black',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 923,
    name: 'Bacardi Breezer Lime',
    capacityPricing: [ [Object] ]
  },
  {
    id: 922,
    name: 'Bacardi Breezer Peach',
    capacityPricing: [ [Object] ]
  },
  {
    id: 921,
    name: 'Bacardi Breezer Pineapple',
    capacityPricing: [ [Object] ]
  },
  {
    id: 924,
    name: 'Bacardi Breezer Watermelon',
    capacityPricing: [ [Object] ]
  },
  {
    id: 925,
    name: 'Bacardi Carta Blanca',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 929,
    name: 'Bacardi Gold',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 927, name: 'Bacardi Limon rum', capacityPricing: [ [Object] ] },
  { id: 933, name: 'Bacardi Mojito', capacityPricing: [ [Object] ] },
  {
    id: 928,
    name: 'Bacardi Oakheart [New Bacardi spiced]',
    capacityPricing: [ [Object] ]
  },
  {
    id: 160,
    name: 'Bacardi Superior White Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 932,
    name: 'Bacardi spiced Rum',
    capacityPricing: [ [Object] ]
  },
  ... 1288 more items
]
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 11 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 15 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 16 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 17 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 14 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 1 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 6 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 13 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 5 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 7 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 9 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "Drink"."id", "Drink"."name", "Drink"."description", "Drink"."price", "Drink"."image", "Drink"."categoryId", "Drink"."subCategoryId", "Drink"."isAvailable", "Drink"."isPopular", "Drink"."isOnOffer", "Drink"."originalPrice", "Drink"."capacity", "Drink"."capacityPricing", "Drink"."abv", "Drink"."createdAt", "Drink"."updatedAt", "category"."id" AS "category.id", "category"."name" AS "category.name", "category"."description" AS "category.description", "category"."image" AS "category.image", "category"."isActive" AS "category.isActive", "category"."createdAt" AS "category.createdAt", "category"."updatedAt" AS "category.updatedAt", "subCategory"."id" AS "subCategory.id", "subCategory"."name" AS "subCategory.name", "subCategory"."categoryId" AS "subCategory.categoryId", "subCategory"."isActive" AS "subCategory.isActive", "subCategory"."createdAt" AS "subCategory.createdAt", "subCategory"."updatedAt" AS "subCategory.updatedAt" FROM "drinks" AS "Drink" LEFT OUTER JOIN "categories" AS "category" ON "Drink"."categoryId" = "category"."id" LEFT OUTER JOIN "subcategories" AS "subCategory" ON "Drink"."subCategoryId" = "subCategory"."id" ORDER BY "Drink"."name" ASC;
Executing (default): SELECT "id", "name", "description", "image", "isActive", "createdAt", "updatedAt" FROM "categories" AS "Category" ORDER BY "Category"."name" ASC;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 12;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 10;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 8;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 11;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 15;
Returning drinks with capacity pricing: [
  {
    id: 277,
    name: '1659 Sauvignon Blanc',
    capacityPricing: [ [Object] ]
  },
  { id: 281, name: '1659 Sweet Rose', capacityPricing: [ [Object] ] },
  {
    id: 1699,
    name: '1792 Small Batch Whisky',
    capacityPricing: [ [Object] ]
  },
  {
    id: 841,
    name: '1857 Grape juice red',
    capacityPricing: [ [Object] ]
  },
  {
    id: 842,
    name: '1857 Grape juice white',
    capacityPricing: [ [Object] ]
  },
  { id: 304, name: '4th Street Red', capacityPricing: [ [Object] ] },
  {
    id: 292,
    name: '4th Street White 5L',
    capacityPricing: [ [Object] ]
  },
  { id: 998, name: '58 Classic Gin', capacityPricing: [ [Object] ] },
  {
    id: 997,
    name: '58 Gin & Tonic Spiced Orange 330ml',
    capacityPricing: [ [Object] ]
  },
  { id: 1236, name: '8PM Fire Liqueur', capacityPricing: [] },
  { id: 1188, name: '8PM Honey', capacityPricing: [] },
  { id: 222, name: '8PM Indian Whisky', capacityPricing: [ [Object] ] },
  {
    id: 1526,
    name: 'Aberfeldy 12 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1564,
    name: 'Aberfeldy 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1706,
    name: 'Aberfeldy 21 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1737,
    name: 'Aberlour 10 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1625,
    name: 'Aberlour 12 Years',
    capacityPricing: [ [Object] ]
  },
  { id: 1543, name: 'Aberlour 18 Years', capacityPricing: null },
  {
    id: 1288,
    name: 'Absolut Citron',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 1386, name: 'Absolut Elyx', capacityPricing: [ [Object] ] },
  { id: 1292, name: 'Absolut Kurant', capacityPricing: [ [Object] ] },
  {
    id: 1290,
    name: 'Absolut Raspberri',
    capacityPricing: [ [Object] ]
  },
  { id: 1289, name: 'Absolut Vanilla', capacityPricing: [ [Object] ] },
  {
    id: 1006,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 25,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 365, name: 'Absolut Watkins', capacityPricing: [ [Object] ] },
  { id: 1390, name: 'Absolute Apeach', capacityPricing: [ [Object] ] },
  { id: 1384, name: 'Absolute Oak', capacityPricing: [ [Object] ] },
  { id: 1407, name: 'Absolute Pears', capacityPricing: [ [Object] ] },
  { id: 1391, name: 'Absolute Pepper', capacityPricing: [ [Object] ] },
  { id: 1392, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1007, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1394, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  { id: 1008, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  {
    id: 385,
    name: 'Ace Of Spades Champagne',
    capacityPricing: [ [Object] ]
  },
  {
    id: 941,
    name: 'Afri Bull Cafe Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1241,
    name: 'African Secret Marula Cream Liqueur',
    capacityPricing: []
  },
  { id: 700, name: 'Agavita Anejo', capacityPricing: [ [Object] ] },
  { id: 675, name: 'Agavita Blanco', capacityPricing: [ [Object] ] },
  { id: 1726, name: 'Akashi Red Whisky', capacityPricing: null },
  { id: 1723, name: 'Akashi White Oak', capacityPricing: [ [Object] ] },
  { id: 467, name: 'Akso Aloe Grapes', capacityPricing: [ [Object] ] },
  {
    id: 130,
    name: 'Akso Aloe Grapes',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 468, name: 'Akso Apple Ice', capacityPricing: [ [Object] ] },
  { id: 127, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 461, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 455, name: 'Akso Grape Ice', capacityPricing: [ [Object] ] },
  { id: 125, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 458, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 128, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  { id: 462, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  {
    id: 120,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 446,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 466,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  {
    id: 129,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  { id: 50, name: 'Al Capone Cigar', capacityPricing: [ [Object] ] },
  { id: 1802, name: 'Alamos Malbec', capacityPricing: null },
  {
    id: 224,
    name: 'All Seasons Whiskey',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 294,
    name: 'Alma Mora Pinot Grigio',
    capacityPricing: [ [Object] ]
  },
  { id: 1811, name: 'Alma Mora Shiraz', capacityPricing: [ [Object] ] },
  { id: 1814, name: 'Altar wine', capacityPricing: [ [Object] ] },
  { id: 1189, name: 'Amarula Cream Liqueur', capacityPricing: [] },
  { id: 1217, name: 'Amarula Gold', capacityPricing: [] },
  {
    id: 1242,
    name: 'Amarula Raspberry Chocolate',
    capacityPricing: []
  },
  {
    id: 1230,
    name: 'Amarula Vanilla Spice Cream',
    capacityPricing: []
  },
  {
    id: 1582,
    name: 'American Honey Whiskey Liqueur',
    capacityPricing: null
  },
  { id: 367, name: 'Amsterdam Vodka', capacityPricing: [ [Object] ] },
  {
    id: 903,
    name: 'Angostura 3 Years Old Reserve',
    capacityPricing: [ [Object] ]
  },
  {
    id: 902,
    name: 'Angostura 5 Years Old Superior Gold',
    capacityPricing: [ [Object] ]
  },
  {
    id: 904,
    name: 'Angostura Bitters',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 1209, name: 'Angostura Bitters', capacityPricing: [] },
  {
    id: 900,
    name: 'Angostura Caribbean Rum 1824',
    capacityPricing: [ [Object] ]
  },
  {
    id: 901,
    name: 'Angostura Caribbean Rum 1919',
    capacityPricing: [ [Object] ]
  },
  { id: 1225, name: 'Anthon Berg Chocolate', capacityPricing: [] },
  {
    id: 807,
    name: 'Aquamist sparkling water',
    capacityPricing: [ [Object] ]
  },
  {
    id: 372,
    name: 'Arthur Metz CrÃ©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1757,
    name: 'Arthur Metz CrÃ©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 375,
    name: "Arthur Metz CrÃ©mant d'Alsace",
    capacityPricing: [ [Object] ]
  },
  {
    id: 1761,
    name: "Arthur Metz CrÃ©mant d'Alsace",
    capacityPricing: null
  },
  { id: 1824, name: 'Asconi Pastoral', capacityPricing: [ [Object] ] },
  {
    id: 287,
    name: 'Asconi Red Semi Sweet',
    capacityPricing: [ [Object] ]
  },
  {
    id: 541,
    name: 'Atlas Ultra Strong 14',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1714,
    name: 'Auchentoshan 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1592,
    name: 'Auchentoshan American Oak',
    capacityPricing: [ [Object] ]
  },
  { id: 662, name: 'Azul Gold Tequila', capacityPricing: [ [Object] ] },
  {
    id: 690,
    name: 'Azul Reposado Tequila',
    capacityPricing: [ [Object] ]
  },
  { id: 930, name: 'Bacardi 8 Years', capacityPricing: [ [Object] ] },
  {
    id: 931,
    name: 'Bacardi Anejo Cuatro',
    capacityPricing: [ [Object] ]
  },
  {
    id: 926,
    name: 'Bacardi Black',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 923,
    name: 'Bacardi Breezer Lime',
    capacityPricing: [ [Object] ]
  },
  {
    id: 922,
    name: 'Bacardi Breezer Peach',
    capacityPricing: [ [Object] ]
  },
  {
    id: 921,
    name: 'Bacardi Breezer Pineapple',
    capacityPricing: [ [Object] ]
  },
  {
    id: 924,
    name: 'Bacardi Breezer Watermelon',
    capacityPricing: [ [Object] ]
  },
  {
    id: 925,
    name: 'Bacardi Carta Blanca',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 929,
    name: 'Bacardi Gold',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 927, name: 'Bacardi Limon rum', capacityPricing: [ [Object] ] },
  { id: 933, name: 'Bacardi Mojito', capacityPricing: [ [Object] ] },
  {
    id: 928,
    name: 'Bacardi Oakheart [New Bacardi spiced]',
    capacityPricing: [ [Object] ]
  },
  {
    id: 160,
    name: 'Bacardi Superior White Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 932,
    name: 'Bacardi spiced Rum',
    capacityPricing: [ [Object] ]
  },
  ... 1288 more items
]
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 16;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 14;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 17;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 1;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 13;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 9;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 6;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 5;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 7;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 15 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 10 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 12 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 8 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 11 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 16 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 14 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 17 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 9 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 6 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 5 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 1 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 13 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 7 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryTestMode';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryFeeWithAlcohol';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryFeeWithoutAlcohol';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryTestMode';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryFeeWithoutAlcohol';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryFeeWithAlcohol';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryTestMode';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'maxTipEnabled';
Executing (default): SELECT "id", "name", "description", "price", "image", "categoryId", "subCategoryId", "isAvailable", "isPopular", "isOnOffer", "originalPrice", "capacity", "capacityPricing", "abv", "createdAt", "updatedAt" FROM "drinks" AS "Drink" WHERE "Drink"."id" = 1826;
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryTestMode';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryFeeWithAlcohol';
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'deliveryFeeWithoutAlcohol';
Executing (default): INSERT INTO "orders" ("id","customerName","customerPhone","customerEmail","deliveryAddress","totalAmount","tipAmount","status","paymentStatus","notes","paymentType","paymentMethod","driverAccepted","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "id","customerName","customerPhone","customerEmail","deliveryAddress","totalAmount","tipAmount","status","paymentStatus","notes","paymentType","paymentMethod","driverId","driverAccepted","createdAt","updatedAt";
Executing (default): INSERT INTO "order_items" ("id","orderId","drinkId","quantity","price","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING "id","orderId","drinkId","quantity","price","createdAt","updatedAt";
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT "id", "key", "value", "createdAt", "updatedAt" FROM "settings" AS "Settings" WHERE "Settings"."key" = 'smsEnabled';
ðŸ“± SMS notifications are DISABLED - skipping SMS for order #85
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = 85;
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Initiating STK Push with: {
  phoneNumber: '254727893741',
  amount: 2,
  reference: 'ORDER-85',
  description: 'Payment for Order #85',
  orderId: 85
}
Phone number formatted: 254727893741 -> 254727893741
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
âœ… Using callback URL from environment: https://homiest-psychopharmacologic-anaya.ngrok-free.dev/api/mpesa/callback
M-Pesa STK Push Request: {
  BusinessShortCode: '174379',
  PhoneNumber: '254727893741',
  Amount: 2,
  CallBackURL: 'https://homiest-psychopharmacologic-anaya.ngrok-free.dev/api/mpesa/callback',
  AccountReference: 'ORDER-85',
  Environment: 'sandbox',
  BaseURL: 'https://sandbox.safaricom.co.ke'
}
Sending STK Push request to M-Pesa...
M-Pesa STK Push response status: 200
M-Pesa STK Push success response: {
  "MerchantRequestID": "ecbf-41c8-b4e3-55d3d5f2ea252795",
  "CheckoutRequestID": "ws_CO_06112025101849716727893741",
  "ResponseCode": "0",
  "ResponseDescription": "Success. Request accepted for processing",
  "CustomerMessage": "Success. Request accepted for processing"
}
ResponseCode: 0
CheckoutRequestID: ws_CO_06112025101849716727893741
CustomerMessage: Success. Request accepted for processing
MerchantRequestID: ecbf-41c8-b4e3-55d3d5f2ea252795
STK Push response received: {
  "MerchantRequestID": "ecbf-41c8-b4e3-55d3d5f2ea252795",
  "CheckoutRequestID": "ws_CO_06112025101849716727893741",
  "ResponseCode": "0",
  "ResponseDescription": "Success. Request accepted for processing",
  "CustomerMessage": "Success. Request accepted for processing"
}
Response code: 0
Error message: undefined
Request ID: undefined
CheckoutRequestID: ws_CO_06112025101849716727893741
MerchantRequestID: ecbf-41c8-b4e3-55d3d5f2ea252795
CustomerMessage: Success. Request accepted for processing
Has CheckoutRequestID: true
Is success code: true
Executing (default): UPDATE "orders" SET "notes"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): INSERT INTO "transactions" ("id","orderId","transactionType","paymentMethod","paymentProvider","amount","status","paymentStatus","checkoutRequestID","merchantRequestID","phoneNumber","notes","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13) RETURNING "id","orderId","driverId","driverWalletId","transactionType","paymentMethod","paymentProvider","amount","status","paymentStatus","receiptNumber","checkoutRequestID","merchantRequestID","phoneNumber","transactionDate","notes","createdAt","updatedAt";
âœ… Transaction record created for Order #85
âœ… STK Push initiated for Order #85. CheckoutRequestID: ws_CO_06112025101849716727893741
Client connected: 5PA7Ql6lMQI5q_9YAAAY
Client 5PA7Ql6lMQI5q_9YAAAY joined room: order-85
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."status" AS "order.status", "order"."paymentStatus" AS "order.paymentStatus", "order"."customerName" AS "order.customerName", "order"."customerEmail" AS "order.customerEmail", "order"."customerPhone" AS "order.customerPhone" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" WHERE "Transaction"."orderId" = '85' ORDER BY "Transaction"."updatedAt" DESC, "Transaction"."createdAt" DESC LIMIT 1;
ðŸ” Transaction lookup for order 85: Found transaction #68 with status: pending, receipt: none
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."status" AS "order.status", "order"."paymentStatus" AS "order.paymentStatus", "order"."customerName" AS "order.customerName", "order"."customerEmail" AS "order.customerEmail", "order"."customerPhone" AS "order.customerPhone" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" WHERE "Transaction"."id" = 68;
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = 85;
Executing (default): SELECT status, "receiptNumber", amount FROM transactions WHERE id = 68
ðŸ” Direct DB query status: pending, Sequelize status: pending
Executing (default): SELECT status FROM orders WHERE id = 85
ðŸ” Direct DB query order: status=pending
ðŸ“¤ Returning transaction status for order 85: {
  transactionId: 68,
  status: 'pending',
  receiptNumber: null,
  orderStatus: 'pending'
}
ðŸ” Polling M-Pesa API for transaction status: ws_CO_06112025101849716727893741
Error checking transaction status: Error: Failed to check transaction status: 429
    at Object.checkTransactionStatus (/Users/maria/dial-a-drink/backend/services/mpesa.js:270:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /Users/maria/dial-a-drink/backend/routes/mpesa.js:1120:21
âŒ M-Pesa API call failed for ws_CO_06112025101849716727893741: Failed to check transaction status: 429
Executing (default): SELECT id, status, "receiptNumber", "checkoutRequestID", "orderId", amount, "phoneNumber", "transactionDate"
       FROM transactions 
       WHERE "orderId" = '85' 
       ORDER BY "updatedAt" DESC, "createdAt" DESC 
       LIMIT 1
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = '85';
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = 85;
Executing (default): SELECT id, status FROM orders WHERE id = 85
ðŸ” Order #85 status check:
   Sequelize: status=pending
   Direct DB: status=pending
Status check for order #85: pending (0.1 minutes old)
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."orderId" = 85 ORDER BY "Transaction"."updatedAt" DESC, "Transaction"."createdAt" DESC LIMIT 1;
ðŸ”” CALLBACK ENDPOINT HIT - Timestamp: 2025-11-06T07:18:57.011Z
ðŸ”” Request method: POST
ðŸ”” Request URL: /callback
ðŸ”” Request headers: {
  "host": "homiest-psychopharmacologic-anaya.ngrok-free.dev",
  "user-agent": "ReactorNetty/1.2.9",
  "content-length": "434",
  "accept": "*/*",
  "businessshortcode": "174379",
  "content-type": "application/json;charset=UTF-8",
  "x-forwarded-for": "196.201.212.138",
  "x-forwarded-host": "homiest-psychopharmacologic-anaya.ngrok-free.dev",
  "x-forwarded-proto": "https",
  "accept-encoding": "gzip"
}
âœ… Responded to M-Pesa callback with 200 OK
TypeError: setImmediate(...) is not a function
    at /Users/maria/dial-a-drink/backend/routes/mpesa.js:1097:5
    at Layer.handleRequest (/Users/maria/dial-a-drink/backend/node_modules/router/lib/layer.js:152:17)
    at next (/Users/maria/dial-a-drink/backend/node_modules/router/lib/route.js:157:13)
    at Route.dispatch (/Users/maria/dial-a-drink/backend/node_modules/router/lib/route.js:117:3)
    at handle (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:435:11)
    at Layer.handleRequest (/Users/maria/dial-a-drink/backend/node_modules/router/lib/layer.js:152:17)
    at /Users/maria/dial-a-drink/backend/node_modules/router/index.js:295:15
    at processParams (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:582:12)
    at next (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:291:5)
    at Function.handle (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:186:3)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ“žðŸ“žðŸ“ž M-Pesa Callback received at: 2025-11-06T07:18:57.014Z
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Full callback data: {
  "Body": {
    "stkCallback": {
      "MerchantRequestID": "ecbf-41c8-b4e3-55d3d5f2ea252795",
      "CheckoutRequestID": "ws_CO_06112025101849716727893741",
      "ResultCode": 0,
      "ResultDesc": "The service request is processed successfully.",
      "CallbackMetadata": {
        "Item": [
          {
            "Name": "Amount",
            "Value": 2
          },
          {
            "Name": "MpesaReceiptNumber",
            "Value": "TK6AK9CQBJ"
          },
          {
            "Name": "Balance"
          },
          {
            "Name": "TransactionDate",
            "Value": 20251106101856
          },
          {
            "Name": "PhoneNumber",
            "Value": 254727893741
          }
        ]
      }
    }
  }
}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸŽ¯ CALLBACK RECEIVED - Check backend logs above for processing details
Raw request body: {
  "Body": {
    "stkCallback": {
      "MerchantRequestID": "ecbf-41c8-b4e3-55d3d5f2ea252795",
      "CheckoutRequestID": "ws_CO_06112025101849716727893741",
      "ResultCode": 0,
      "ResultDesc": "The service request is processed successfully.",
      "CallbackMetadata": {
        "Item": [
          {
            "Name": "Amount",
            "Value": 2
          },
          {
            "Name": "MpesaReceiptNumber",
            "Value": "TK6AK9CQBJ"
          },
          {
            "Name": "Balance"
          },
          {
            "Name": "TransactionDate",
            "Value": 20251106101856
          },
          {
            "Name": "PhoneNumber",
            "Value": 254727893741
          }
        ]
      }
    }
  }
}
Request headers: {
  "host": "homiest-psychopharmacologic-anaya.ngrok-free.dev",
  "user-agent": "ReactorNetty/1.2.9",
  "content-length": "434",
  "accept": "*/*",
  "businessshortcode": "174379",
  "content-type": "application/json;charset=UTF-8",
  "x-forwarded-for": "196.201.212.138",
  "x-forwarded-host": "homiest-psychopharmacologic-anaya.ngrok-free.dev",
  "x-forwarded-proto": "https",
  "accept-encoding": "gzip"
}
ðŸ” Looking for order with CheckoutRequestID: ws_CO_06112025101849716727893741
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName", "order"."customerPhone" AS "order.customerPhone", "order"."customerEmail" AS "order.customerEmail", "order"."deliveryAddress" AS "order.deliveryAddress", "order"."totalAmount" AS "order.totalAmount", "order"."tipAmount" AS "order.tipAmount", "order"."status" AS "order.status", "order"."paymentStatus" AS "order.paymentStatus", "order"."notes" AS "order.notes", "order"."paymentType" AS "order.paymentType", "order"."paymentMethod" AS "order.paymentMethod", "order"."driverId" AS "order.driverId", "order"."driverAccepted" AS "order.driverAccepted", "order"."createdAt" AS "order.createdAt", "order"."updatedAt" AS "order.updatedAt" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" WHERE "Transaction"."checkoutRequestID" = 'ws_CO_06112025101849716727893741' LIMIT 1;
âœ… Found order #85 via transaction lookup
âœ… Found order #85 for CheckoutRequestID: ws_CO_06112025101849716727893741
   Order current status: pending, paymentStatus: pending
ðŸ’° Payment details from callback:
   Receipt: TK6AK9CQBJ
   Amount: 2
   Phone: 254727893741
   Transaction Date: 20251106101856
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."checkoutRequestID" = 'ws_CO_06112025101849716727893741' LIMIT 1;
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:700:11)
    at ServerResponse.header (/Users/maria/dial-a-drink/backend/node_modules/express/lib/response.js:684:10)
    at ServerResponse.send (/Users/maria/dial-a-drink/backend/node_modules/express/lib/response.js:161:12)
    at ServerResponse.json (/Users/maria/dial-a-drink/backend/node_modules/express/lib/response.js:250:15)
    at /Users/maria/dial-a-drink/backend/app.js:94:19
    at Layer.handleError (/Users/maria/dial-a-drink/backend/node_modules/router/lib/layer.js:116:17)
    at trimPrefix (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:340:13)
    at /Users/maria/dial-a-drink/backend/node_modules/router/index.js:297:9
    at processParams (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:582:12)
    at next (/Users/maria/dial-a-drink/backend/node_modules/router/index.js:291:5)
ðŸ” Transaction lookup by checkoutRequestID: Found #68 (status: pending)
ðŸ“ Updating existing transaction #68 for Order #85
   Current status: pending
   Current amount: 1.00, should be: 1
   Updating to: completed
Executing (default): UPDATE transactions SET status = 'completed', "paymentStatus" = 'paid', "receiptNumber" = 'TK6AK9CQBJ', "orderId" = 85, amount = 1, "transactionDate" = '2611-09-25 22:15:01.856 +03:00', "phoneNumber" = COALESCE(254727893741, "phoneNumber"), "updatedAt" = NOW(), notes = COALESCE(notes || E'
', '') || 'âœ… Payment completed. Receipt: TK6AK9CQBJ (Tip: KES 1.00 is separate transaction)' WHERE id = 68
âŒ Error updating transaction: Error
    at Query.run (/Users/maria/dial-a-drink/backend/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /Users/maria/dial-a-drink/backend/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Immediate.<anonymous> (/Users/maria/dial-a-drink/backend/routes/mpesa.js:544:15) {
  name: 'SequelizeDatabaseError',
  parent: error: COALESCE types bigint and character varying cannot be matched
      at Parser.parseErrorMessage (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:519:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
    length: 136,
    severity: 'ERROR',
    code: '42804',
    detail: undefined,
    hint: undefined,
    position: '226',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_coerce.c',
    line: '1424',
    routine: 'select_common_type',
    sql: `UPDATE transactions SET status = 'completed', "paymentStatus" = 'paid', "receiptNumber" = 'TK6AK9CQBJ', "orderId" = 85, amount = 1, "transactionDate" = '2611-09-25 22:15:01.856 +03:00', "phoneNumber" = COALESCE(254727893741, "phoneNumber"), "updatedAt" = NOW(), notes = COALESCE(notes || E'\n` +
      "', '') || 'âœ… Payment completed. Receipt: TK6AK9CQBJ (Tip: KES 1.00 is separate transaction)' WHERE id = 68",
    parameters: undefined
  },
  original: error: COALESCE types bigint and character varying cannot be matched
      at Parser.parseErrorMessage (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/Users/maria/dial-a-drink/backend/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:519:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
    length: 136,
    severity: 'ERROR',
    code: '42804',
    detail: undefined,
    hint: undefined,
    position: '226',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_coerce.c',
    line: '1424',
    routine: 'select_common_type',
    sql: `UPDATE transactions SET status = 'completed', "paymentStatus" = 'paid', "receiptNumber" = 'TK6AK9CQBJ', "orderId" = 85, amount = 1, "transactionDate" = '2611-09-25 22:15:01.856 +03:00', "phoneNumber" = COALESCE(254727893741, "phoneNumber"), "updatedAt" = NOW(), notes = COALESCE(notes || E'\n` +
      "', '') || 'âœ… Payment completed. Receipt: TK6AK9CQBJ (Tip: KES 1.00 is separate transaction)' WHERE id = 68",
    parameters: undefined
  },
  sql: `UPDATE transactions SET status = 'completed', "paymentStatus" = 'paid', "receiptNumber" = 'TK6AK9CQBJ', "orderId" = 85, amount = 1, "transactionDate" = '2611-09-25 22:15:01.856 +03:00', "phoneNumber" = COALESCE(254727893741, "phoneNumber"), "updatedAt" = NOW(), notes = COALESCE(notes || E'\n` +
    "', '') || 'âœ… Payment completed. Receipt: TK6AK9CQBJ (Tip: KES 1.00 is separate transaction)' WHERE id = 68",
  parameters: {}
}
Executing (default): UPDATE transactions SET status = 'completed', "paymentStatus" = 'paid', "receiptNumber" = 'TK6AK9CQBJ', "updatedAt" = NOW() WHERE id = 68
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."id" = 68;
âœ… Transaction #68 updated to completed. Status: completed
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."id" = 68;
ðŸ” Verified transaction status from DB: completed
ðŸ“ Order #85 is "pending", keeping status but updating paymentStatus to 'paid'
ðŸ“ Updating order #85: status from 'pending' to 'pending', paymentStatus to 'paid' (transaction completed)
Executing (default): UPDATE orders SET status = 'pending', "paymentStatus" = 'paid', "updatedAt" = NOW(), notes = COALESCE(notes || E'
', '') || 'âœ… M-Pesa Receipt: TK6AK9CQBJ
âœ… Payment confirmed at: 2025-11-06T07:18:57.029Z' WHERE id = 85
âœ… Order #85 updated via raw SQL: status=pending, paymentStatus=paid
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."orderId" = 85 AND "Transaction"."transactionType" = 'tip' LIMIT 1;
Executing (default): INSERT INTO "transactions" ("id","orderId","transactionType","paymentMethod","paymentProvider","amount","status","paymentStatus","receiptNumber","checkoutRequestID","merchantRequestID","phoneNumber","transactionDate","notes","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) RETURNING "id","orderId","driverId","driverWalletId","transactionType","paymentMethod","paymentProvider","amount","status","paymentStatus","receiptNumber","checkoutRequestID","merchantRequestID","phoneNumber","transactionDate","notes","createdAt","updatedAt";
âœ… Tip transaction created for Order #85: KES 1 (after payment completion)
Executing (default): SELECT "id", "balance", "totalRevenue", "totalOrders", "createdAt", "updatedAt" FROM "admin_wallets" AS "AdminWallet" WHERE "AdminWallet"."id" = 1;
Executing (default): UPDATE "admin_wallets" SET "balance"=$1,"totalRevenue"=$2,"totalOrders"=$3,"updatedAt"=$4 WHERE "id" = $5
âœ… Order payment of KES 1 credited to admin wallet for Order #85
Executing (default): UPDATE "orders" SET "paymentStatus"=$1,"notes"=$2,"updatedAt"=$3 WHERE "id" = $4
âœ… Order #85 also updated via Sequelize
âœ… Order #85 status updated to 'pending' (triggered by transaction completion)
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt", "orderItems->drink"."id" AS "orderItems.drink.id", "orderItems->drink"."name" AS "orderItems.drink.name", "orderItems->drink"."description" AS "orderItems.drink.description", "orderItems->drink"."price" AS "orderItems.drink.price", "orderItems->drink"."image" AS "orderItems.drink.image", "orderItems->drink"."categoryId" AS "orderItems.drink.categoryId", "orderItems->drink"."subCategoryId" AS "orderItems.drink.subCategoryId", "orderItems->drink"."isAvailable" AS "orderItems.drink.isAvailable", "orderItems->drink"."isPopular" AS "orderItems.drink.isPopular", "orderItems->drink"."isOnOffer" AS "orderItems.drink.isOnOffer", "orderItems->drink"."originalPrice" AS "orderItems.drink.originalPrice", "orderItems->drink"."capacity" AS "orderItems.drink.capacity", "orderItems->drink"."capacityPricing" AS "orderItems.drink.capacityPricing", "orderItems->drink"."abv" AS "orderItems.drink.abv", "orderItems->drink"."createdAt" AS "orderItems.drink.createdAt", "orderItems->drink"."updatedAt" AS "orderItems.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" LEFT OUTER JOIN "drinks" AS "orderItems->drink" ON "orderItems"."drinkId" = "orderItems->drink"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT id, status, "paymentStatus", "driverId" FROM orders WHERE id = 85
âœ…âœ…âœ… Order #85 AUTOMATICALLY CONFIRMED via M-Pesa payment
   Order Status (DB): pending
   Payment Status (DB): paid
   Driver ID: Not assigned
   Receipt: TK6AK9CQBJ
   Amount: 2
   Phone: 254727893741
   Transaction ID: 68
   Transaction Status: completed
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt", "orderItems->drink"."id" AS "orderItems.drink.id", "orderItems->drink"."name" AS "orderItems.drink.name", "orderItems->drink"."description" AS "orderItems.drink.description", "orderItems->drink"."price" AS "orderItems.drink.price", "orderItems->drink"."image" AS "orderItems.drink.image", "orderItems->drink"."categoryId" AS "orderItems.drink.categoryId", "orderItems->drink"."subCategoryId" AS "orderItems.drink.subCategoryId", "orderItems->drink"."isAvailable" AS "orderItems.drink.isAvailable", "orderItems->drink"."isPopular" AS "orderItems.drink.isPopular", "orderItems->drink"."isOnOffer" AS "orderItems.drink.isOnOffer", "orderItems->drink"."originalPrice" AS "orderItems.drink.originalPrice", "orderItems->drink"."capacity" AS "orderItems.drink.capacity", "orderItems->drink"."capacityPricing" AS "orderItems.drink.capacityPricing", "orderItems->drink"."abv" AS "orderItems.drink.abv", "orderItems->drink"."createdAt" AS "orderItems.drink.createdAt", "orderItems->drink"."updatedAt" AS "orderItems.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" LEFT OUTER JOIN "drinks" AS "orderItems->drink" ON "orderItems"."drinkId" = "orderItems->drink"."id" WHERE "Order"."id" = 85;
ðŸ“¡ Preparing payment-confirmed event for Order #85
   Status: pending
   PaymentStatus: paid
   Order paymentStatus in data: paid
   Driver ID: Not assigned
âš ï¸  No driverId found for Order #85, skipping driver notification
ðŸ“¡ Socket.IO events emitted for Order #85 with transaction status: completed
âœ… Callback processing completed
Client disconnected: 5PA7Ql6lMQI5q_9YAAAY
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."id" = '85';
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."id" = 85 ORDER BY "Order"."createdAt" DESC;
Client connected: tWrjKb9UBOwVIqxVAAAa
Client tWrjKb9UBOwVIqxVAAAa joined room: order-85
Client disconnected: tWrjKb9UBOwVIqxVAAAa
Client connected: o2cZ666P6h9wih2uAAAe
Client connected: 2IKjnprVxb210JFYAAAf
Client o2cZ666P6h9wih2uAAAe joined room: order-85
Client 2IKjnprVxb210JFYAAAf joined room: order-85
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client disconnected: _8mF3LFgpGLy6rARAAAS
Client connected: Bj9q4yN8QjxDHQ2kAAAi
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" ORDER BY "Order"."createdAt" DESC;
Client Bj9q4yN8QjxDHQ2kAAAi joined admin room
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" ORDER BY "Driver"."lastActivity" DESC, "Driver"."createdAt" DESC;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" ORDER BY "Driver"."lastActivity" DESC, "Driver"."createdAt" DESC;
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = '85';
Executing (default): UPDATE "orders" SET "status"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status", "driver"."lastActivity" AS "driver.lastActivity", "driver"."pinHash" AS "driver.pinHash", "driver"."createdAt" AS "driver.createdAt", "driver"."updatedAt" AS "driver.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = '85';
Executing (default): UPDATE "orders" SET "status"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status", "driver"."lastActivity" AS "driver.lastActivity", "driver"."pinHash" AS "driver.pinHash", "driver"."createdAt" AS "driver.createdAt", "driver"."updatedAt" AS "driver.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = '85';
Executing (default): UPDATE "orders" SET "driverId"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."orderId" = 85 AND "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'pending' LIMIT 1;
Executing (default): SELECT "id", "driverId", "balance", "totalTipsReceived", "totalTipsCount", "createdAt", "updatedAt" FROM "driver_wallets" AS "DriverWallet" WHERE "DriverWallet"."driverId" = 1;
Executing (default): UPDATE "driver_wallets" SET "balance"=$1,"totalTipsReceived"=$2,"totalTipsCount"=$3,"updatedAt"=$4 WHERE "id" = $5
Executing (default): UPDATE "transactions" SET "driverId"=$1,"driverWalletId"=$2,"status"=$3,"notes"=$4,"updatedAt"=$5 WHERE "id" = $6
âœ… Tip of KES 1 credited to driver #1 wallet for Order #85
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."orderId" = 85 AND "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."driverId" = 1 LIMIT 1;
Executing (default): SELECT "id", "driverId", "balance", "totalTipsReceived", "totalTipsCount", "createdAt", "updatedAt" FROM "driver_wallets" AS "DriverWallet" WHERE "DriverWallet"."driverId" = 1;
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."id" = 1;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt", "orderItems->drink"."id" AS "orderItems.drink.id", "orderItems->drink"."name" AS "orderItems.drink.name", "orderItems->drink"."description" AS "orderItems.drink.description", "orderItems->drink"."price" AS "orderItems.drink.price", "orderItems->drink"."image" AS "orderItems.drink.image", "orderItems->drink"."categoryId" AS "orderItems.drink.categoryId", "orderItems->drink"."subCategoryId" AS "orderItems.drink.subCategoryId", "orderItems->drink"."isAvailable" AS "orderItems.drink.isAvailable", "orderItems->drink"."isPopular" AS "orderItems.drink.isPopular", "orderItems->drink"."isOnOffer" AS "orderItems.drink.isOnOffer", "orderItems->drink"."originalPrice" AS "orderItems.drink.originalPrice", "orderItems->drink"."capacity" AS "orderItems.drink.capacity", "orderItems->drink"."capacityPricing" AS "orderItems.drink.capacityPricing", "orderItems->drink"."abv" AS "orderItems.drink.abv", "orderItems->drink"."createdAt" AS "orderItems.drink.createdAt", "orderItems->drink"."updatedAt" AS "orderItems.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" LEFT OUTER JOIN "drinks" AS "orderItems->drink" ON "orderItems"."drinkId" = "orderItems->drink"."id" WHERE "Order"."id" = '85';
Executing (default): UPDATE "orders" SET "driverAccepted"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status", "driver"."lastActivity" AS "driver.lastActivity", "driver"."pinHash" AS "driver.pinHash", "driver"."createdAt" AS "driver.createdAt", "driver"."updatedAt" AS "driver.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."driverId" = 1 ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."driverId" = 1 ORDER BY "Order"."createdAt" DESC;
Client connected: SmWMfSRWn9OuZn7wAAAk
Client SmWMfSRWn9OuZn7wAAAk joined driver room: driver-1
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."id" = '85';
Executing (default): UPDATE "orders" SET "status"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt", "transactions"."id" AS "transactions.id", "transactions"."orderId" AS "transactions.orderId", "transactions"."driverId" AS "transactions.driverId", "transactions"."driverWalletId" AS "transactions.driverWalletId", "transactions"."transactionType" AS "transactions.transactionType", "transactions"."paymentMethod" AS "transactions.paymentMethod", "transactions"."paymentProvider" AS "transactions.paymentProvider", "transactions"."amount" AS "transactions.amount", "transactions"."status" AS "transactions.status", "transactions"."paymentStatus" AS "transactions.paymentStatus", "transactions"."receiptNumber" AS "transactions.receiptNumber", "transactions"."checkoutRequestID" AS "transactions.checkoutRequestID", "transactions"."merchantRequestID" AS "transactions.merchantRequestID", "transactions"."phoneNumber" AS "transactions.phoneNumber", "transactions"."transactionDate" AS "transactions.transactionDate", "transactions"."notes" AS "transactions.notes", "transactions"."createdAt" AS "transactions.createdAt", "transactions"."updatedAt" AS "transactions.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status", "driver"."lastActivity" AS "driver.lastActivity", "driver"."pinHash" AS "driver.pinHash", "driver"."createdAt" AS "driver.createdAt", "driver"."updatedAt" AS "driver.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" LEFT OUTER JOIN "transactions" AS "transactions" ON "Order"."id" = "transactions"."orderId" LEFT OUTER JOIN "drivers" AS "driver" ON "Order"."driverId" = "driver"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client connected: p0SbpMeBOkGmrA9gAAAm
Client p0SbpMeBOkGmrA9gAAAm joined room: order-85
Client disconnected: p0SbpMeBOkGmrA9gAAAm
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "DriverWallet"."id", "DriverWallet"."driverId", "DriverWallet"."balance", "DriverWallet"."totalTipsReceived", "DriverWallet"."totalTipsCount", "DriverWallet"."createdAt", "DriverWallet"."updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber" FROM "driver_wallets" AS "DriverWallet" LEFT OUTER JOIN "drivers" AS "driver" ON "DriverWallet"."driverId" = "driver"."id" WHERE "DriverWallet"."driverId" = '1';
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName", "order"."createdAt" AS "order.createdAt" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" WHERE "Transaction"."driverId" = '1' AND "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' ORDER BY "Transaction"."createdAt" DESC LIMIT 50;
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."driverId" = '1' AND "Transaction"."transactionType" = 'withdrawal' ORDER BY "Transaction"."createdAt" DESC LIMIT 20;
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."driverId" = 1 ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client connected: 2pTNFwQEiyxFFVROAAAo
Client 2pTNFwQEiyxFFVROAAAo joined room: order-85
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" WHERE "Order"."id" = '85';
Executing (default): UPDATE "orders" SET "status"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."id" = 1;
Executing (default): UPDATE "drivers" SET "lastActivity"=$1,"updatedAt"=$2 WHERE "id" = $3
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE ("Transaction"."status" = 'pending' OR (("Transaction"."driverId" IS NULL OR "Transaction"."driverId" != 1 OR "Transaction"."driverWalletId" IS NULL) AND "Transaction"."status" = 'completed')) AND "Transaction"."orderId" = 85 AND "Transaction"."transactionType" = 'tip' LIMIT 1;
âš ï¸  No tip transaction found for Order #85 - tip may not have been created during payment
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt", "orderItems->drink"."id" AS "orderItems.drink.id", "orderItems->drink"."name" AS "orderItems.drink.name", "orderItems->drink"."description" AS "orderItems.drink.description", "orderItems->drink"."price" AS "orderItems.drink.price", "orderItems->drink"."image" AS "orderItems.drink.image", "orderItems->drink"."categoryId" AS "orderItems.drink.categoryId", "orderItems->drink"."subCategoryId" AS "orderItems.drink.subCategoryId", "orderItems->drink"."isAvailable" AS "orderItems.drink.isAvailable", "orderItems->drink"."isPopular" AS "orderItems.drink.isPopular", "orderItems->drink"."isOnOffer" AS "orderItems.drink.isOnOffer", "orderItems->drink"."originalPrice" AS "orderItems.drink.originalPrice", "orderItems->drink"."capacity" AS "orderItems.drink.capacity", "orderItems->drink"."capacityPricing" AS "orderItems.drink.capacityPricing", "orderItems->drink"."abv" AS "orderItems.drink.abv", "orderItems->drink"."createdAt" AS "orderItems.drink.createdAt", "orderItems->drink"."updatedAt" AS "orderItems.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" LEFT OUTER JOIN "drinks" AS "orderItems->drink" ON "orderItems"."drinkId" = "orderItems->drink"."id" WHERE "Order"."id" = 85;
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt", "orderItems->drink"."id" AS "orderItems.drink.id", "orderItems->drink"."name" AS "orderItems.drink.name", "orderItems->drink"."description" AS "orderItems.drink.description", "orderItems->drink"."price" AS "orderItems.drink.price", "orderItems->drink"."image" AS "orderItems.drink.image", "orderItems->drink"."categoryId" AS "orderItems.drink.categoryId", "orderItems->drink"."subCategoryId" AS "orderItems.drink.subCategoryId", "orderItems->drink"."isAvailable" AS "orderItems.drink.isAvailable", "orderItems->drink"."isPopular" AS "orderItems.drink.isPopular", "orderItems->drink"."isOnOffer" AS "orderItems.drink.isOnOffer", "orderItems->drink"."originalPrice" AS "orderItems.drink.originalPrice", "orderItems->drink"."capacity" AS "orderItems.drink.capacity", "orderItems->drink"."capacityPricing" AS "orderItems.drink.capacityPricing", "orderItems->drink"."abv" AS "orderItems.drink.abv", "orderItems->drink"."createdAt" AS "orderItems.drink.createdAt", "orderItems->drink"."updatedAt" AS "orderItems.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" LEFT OUTER JOIN "drinks" AS "orderItems->drink" ON "orderItems"."drinkId" = "orderItems->drink"."id" WHERE "Order"."id" = 85;
ðŸ“¡ Emitting order-status-updated for Order #85
   Status: out_for_delivery â†’ completed
   PaymentStatus: paid
ðŸ“¡ Also emitted to driver-1 room
ðŸ“¡ Emitted order-status-updated to admin room for Order #85: out_for_delivery â†’ completed
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "orderItems"."id" AS "orderItems.id", "orderItems"."orderId" AS "orderItems.orderId", "orderItems"."drinkId" AS "orderItems.drinkId", "orderItems"."quantity" AS "orderItems.quantity", "orderItems"."price" AS "orderItems.price", "orderItems"."createdAt" AS "orderItems.createdAt", "orderItems"."updatedAt" AS "orderItems.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "orderItems" ON "Order"."id" = "orderItems"."orderId" WHERE "Order"."id" = '85';
Client disconnected: Bj9q4yN8QjxDHQ2kAAAi
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName", "order"."customerPhone" AS "order.customerPhone", "order"."customerEmail" AS "order.customerEmail", "order"."deliveryAddress" AS "order.deliveryAddress", "order"."totalAmount" AS "order.totalAmount", "order"."tipAmount" AS "order.tipAmount", "order"."status" AS "order.status", "order"."paymentStatus" AS "order.paymentStatus", "order"."notes" AS "order.notes", "order"."paymentType" AS "order.paymentType", "order"."paymentMethod" AS "order.paymentMethod", "order"."driverId" AS "order.driverId", "order"."driverAccepted" AS "order.driverAccepted", "order"."createdAt" AS "order.createdAt", "order"."updatedAt" AS "order.updatedAt", "order->items"."id" AS "order.items.id", "order->items"."orderId" AS "order.items.orderId", "order->items"."drinkId" AS "order.items.drinkId", "order->items"."quantity" AS "order.items.quantity", "order->items"."price" AS "order.items.price", "order->items"."createdAt" AS "order.items.createdAt", "order->items"."updatedAt" AS "order.items.updatedAt", "order->items->drink"."id" AS "order.items.drink.id", "order->items->drink"."name" AS "order.items.drink.name", "order->items->drink"."description" AS "order.items.drink.description", "order->items->drink"."price" AS "order.items.drink.price", "order->items->drink"."image" AS "order.items.drink.image", "order->items->drink"."categoryId" AS "order.items.drink.categoryId", "order->items->drink"."subCategoryId" AS "order.items.drink.subCategoryId", "order->items->drink"."isAvailable" AS "order.items.drink.isAvailable", "order->items->drink"."isPopular" AS "order.items.drink.isPopular", "order->items->drink"."isOnOffer" AS "order.items.drink.isOnOffer", "order->items->drink"."originalPrice" AS "order.items.drink.originalPrice", "order->items->drink"."capacity" AS "order.items.drink.capacity", "order->items->drink"."capacityPricing" AS "order.items.drink.capacityPricing", "order->items->drink"."abv" AS "order.items.drink.abv", "order->items->drink"."createdAt" AS "order.items.drink.createdAt", "order->items->drink"."updatedAt" AS "order.items.drink.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" LEFT OUTER JOIN "order_items" AS "order->items" ON "order"."id" = "order->items"."orderId" LEFT OUTER JOIN "drinks" AS "order->items->drink" ON "order->items"."drinkId" = "order->items->drink"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Transaction"."driverId" = "driver"."id" ORDER BY "Transaction"."createdAt" DESC;
Executing (default): SELECT "id", "balance", "totalRevenue", "totalOrders", "createdAt", "updatedAt" FROM "admin_wallets" AS "AdminWallet" WHERE "AdminWallet"."id" = 1;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName", "order"."customerPhone" AS "order.customerPhone", "order"."customerEmail" AS "order.customerEmail", "order"."deliveryAddress" AS "order.deliveryAddress", "order"."totalAmount" AS "order.totalAmount", "order"."tipAmount" AS "order.tipAmount", "order"."status" AS "order.status", "order"."paymentStatus" AS "order.paymentStatus", "order"."notes" AS "order.notes", "order"."paymentType" AS "order.paymentType", "order"."paymentMethod" AS "order.paymentMethod", "order"."driverId" AS "order.driverId", "order"."driverAccepted" AS "order.driverAccepted", "order"."createdAt" AS "order.createdAt", "order"."updatedAt" AS "order.updatedAt", "order->items"."id" AS "order.items.id", "order->items"."orderId" AS "order.items.orderId", "order->items"."drinkId" AS "order.items.drinkId", "order->items"."quantity" AS "order.items.quantity", "order->items"."price" AS "order.items.price", "order->items"."createdAt" AS "order.items.createdAt", "order->items"."updatedAt" AS "order.items.updatedAt", "order->items->drink"."id" AS "order.items.drink.id", "order->items->drink"."name" AS "order.items.drink.name", "order->items->drink"."description" AS "order.items.drink.description", "order->items->drink"."price" AS "order.items.drink.price", "order->items->drink"."image" AS "order.items.drink.image", "order->items->drink"."categoryId" AS "order.items.drink.categoryId", "order->items->drink"."subCategoryId" AS "order.items.drink.subCategoryId", "order->items->drink"."isAvailable" AS "order.items.drink.isAvailable", "order->items->drink"."isPopular" AS "order.items.drink.isPopular", "order->items->drink"."isOnOffer" AS "order.items.drink.isOnOffer", "order->items->drink"."originalPrice" AS "order.items.drink.originalPrice", "order->items->drink"."capacity" AS "order.items.drink.capacity", "order->items->drink"."capacityPricing" AS "order.items.drink.capacityPricing", "order->items->drink"."abv" AS "order.items.drink.abv", "order->items->drink"."createdAt" AS "order.items.drink.createdAt", "order->items->drink"."updatedAt" AS "order.items.drink.updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber", "driver"."status" AS "driver.status" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" LEFT OUTER JOIN "order_items" AS "order->items" ON "order"."id" = "order->items"."orderId" LEFT OUTER JOIN "drinks" AS "order->items->drink" ON "order->items"."drinkId" = "order->items->drink"."id" LEFT OUTER JOIN "drivers" AS "driver" ON "Transaction"."driverId" = "driver"."id" ORDER BY "Transaction"."createdAt" DESC;
Executing (default): SELECT "id", "balance", "totalRevenue", "totalOrders", "createdAt", "updatedAt" FROM "admin_wallets" AS "AdminWallet" WHERE "AdminWallet"."id" = 1;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client disconnected: 2pTNFwQEiyxFFVROAAAo
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "DriverWallet"."id", "DriverWallet"."driverId", "DriverWallet"."balance", "DriverWallet"."totalTipsReceived", "DriverWallet"."totalTipsCount", "DriverWallet"."createdAt", "DriverWallet"."updatedAt", "driver"."id" AS "driver.id", "driver"."name" AS "driver.name", "driver"."phoneNumber" AS "driver.phoneNumber" FROM "driver_wallets" AS "DriverWallet" LEFT OUTER JOIN "drivers" AS "driver" ON "DriverWallet"."driverId" = "driver"."id" WHERE "DriverWallet"."driverId" = '1';
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName", "order"."createdAt" AS "order.createdAt" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" WHERE "Transaction"."driverId" = '1' AND "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' ORDER BY "Transaction"."createdAt" DESC LIMIT 50;
Executing (default): SELECT "id", "orderId", "driverId", "driverWalletId", "transactionType", "paymentMethod", "paymentProvider", "amount", "status", "paymentStatus", "receiptNumber", "checkoutRequestID", "merchantRequestID", "phoneNumber", "transactionDate", "notes", "createdAt", "updatedAt" FROM "transactions" AS "Transaction" WHERE "Transaction"."driverId" = '1' AND "Transaction"."transactionType" = 'withdrawal' ORDER BY "Transaction"."createdAt" DESC LIMIT 20;
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '254727893741';
Executing (default): SELECT "id", "name", "phoneNumber", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): SELECT "Order"."id", "Order"."customerName", "Order"."customerPhone", "Order"."customerEmail", "Order"."deliveryAddress", "Order"."totalAmount", "Order"."tipAmount", "Order"."status", "Order"."paymentStatus", "Order"."notes", "Order"."paymentType", "Order"."paymentMethod", "Order"."driverId", "Order"."driverAccepted", "Order"."createdAt", "Order"."updatedAt", "items"."id" AS "items.id", "items"."orderId" AS "items.orderId", "items"."drinkId" AS "items.drinkId", "items"."quantity" AS "items.quantity", "items"."price" AS "items.price", "items"."createdAt" AS "items.createdAt", "items"."updatedAt" AS "items.updatedAt", "items->drink"."id" AS "items.drink.id", "items->drink"."name" AS "items.drink.name", "items->drink"."description" AS "items.drink.description", "items->drink"."price" AS "items.drink.price", "items->drink"."image" AS "items.drink.image", "items->drink"."categoryId" AS "items.drink.categoryId", "items->drink"."subCategoryId" AS "items.drink.subCategoryId", "items->drink"."isAvailable" AS "items.drink.isAvailable", "items->drink"."isPopular" AS "items.drink.isPopular", "items->drink"."isOnOffer" AS "items.drink.isOnOffer", "items->drink"."originalPrice" AS "items.drink.originalPrice", "items->drink"."capacity" AS "items.drink.capacity", "items->drink"."capacityPricing" AS "items.drink.capacityPricing", "items->drink"."abv" AS "items.drink.abv", "items->drink"."createdAt" AS "items.drink.createdAt", "items->drink"."updatedAt" AS "items.drink.updatedAt" FROM "orders" AS "Order" LEFT OUTER JOIN "order_items" AS "items" ON "Order"."id" = "items"."orderId" LEFT OUTER JOIN "drinks" AS "items->drink" ON "items"."drinkId" = "items->drink"."id" WHERE "Order"."driverId" = 1 ORDER BY "Order"."createdAt" DESC;
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-05 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-05 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Client disconnected: SmWMfSRWn9OuZn7wAAAk
Client disconnected: CBbCHMhhPDVIh3HPAAAV
